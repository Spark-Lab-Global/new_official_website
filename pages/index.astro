---
import A1 from "@/sections/home/A1";
import A2 from "@/sections/home/A2";
import A3 from "@/sections/home/A3";
import B2 from "@/sections/manifesto/B2";
import C1 from "@/sections/portfolio/C1";
import C2 from "@/sections/portfolio/C2";

import Next from "@/components/ui/Next";
import Layout from "@/layouts/Layout.astro";

import { getImage } from "astro:assets";
import a1_a from "@/assets/a1/a.png";
import a2_a from "@/assets/a2/a.svg";
import a3_a from "@/assets/a3/a.png";
import a3_b from "@/assets/a3/b.png";
import a3_c from "@/assets/a3/c.png";
import a3_d from "@/assets/a3/d.png";
import b2_a from "@/assets/b2/a.png";
import c2_a from "@/assets/c2/a.svg";

import {
  getLangFromUrl,
  useTranslations,
  useTranslatedPath,
} from "@/i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
const translatePath = useTranslatedPath(lang);

const a1_a_image = await getImage({
  src: a1_a,
  format: "webp",
});

const a2_a_image = await getImage({
  src: a2_a,
  format: "svg",
});

const a3_images = await Promise.all([
  getImage({ src: a3_a, format: "webp" }),
  getImage({ src: a3_b, format: "webp" }),
  getImage({ src: a3_c, format: "webp" }),
  getImage({ src: a3_d, format: "webp" }),
]);

const b2_a_image = await getImage({
  src: b2_a,
  format: "webp",
});

const c2_a_image = await getImage({
  src: c2_a,
  format: "svg",
});
---

<Layout>
  <div class="flex flex-col gap-20">
    <A1 imageSrc={a1_a_image.src} client:load />
    <A2 imageSrc={a2_a_image.src} t={t} translatePath={translatePath} />
    <!-- <A3 t={t} images={a3_images.map((img) => ({ src: img.src }))} client:load /> -->
    <B2 t={t} imageSrc={b2_a_image.src} />
    <C1 t={t} />
    <C2 t={t} imageSrc={c2_a_image.src} />
  </div>
  <Next title="Manifesto" href={translatePath("/manifesto")} />
</Layout>
